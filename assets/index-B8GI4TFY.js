import{j as o,r as l,a as N}from"./react-B1CnsdDo.js";import{c as A}from"./react-dom-Dfmsd_LZ.js";import{u as R,a as u,P as C}from"./react-redux-I-goPx3K.js";import{L as O,c as D,R as M}from"./react-router-dom-srny-1qH.js";import{O as z,f as G,g as h}from"./react-router-DqcWdz_N.js";import{C as w,T as d,B as T,a as p,d as K,b as H,I as U,c as V,G as b,e as W,f as k}from"./@mui-BKgrGv4F.js";import{c as J,a as Q}from"./@reduxjs-DYdxbMDp.js";import{u as x,i as X,I as Y}from"./react-i18next-DOVCvEEL.js";import{c as Z}from"./clsx-B-dksMZM.js";import{i as v}from"./i18next-Bpy-z6dm.js";import{t as f,c as P,p as i,a as ee,s as te}from"./@redux-saga-DUEy-Qft.js";import{c as oe}from"./redux-DITMfSWq.js";import{a as j,A as S}from"./axios-zzg7_j7n.js";import"./@babel-DgsEKXq2.js";import"./scheduler-CzFDRTuY.js";import"./use-sync-external-store-Bb9pIWZR.js";import"./@remix-run-C0-MrpDd.js";import"./@emotion-Dg_j2BVT.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./stylis-BqmD5Vow.js";import"./react-is-DcfIKM1A.js";import"./react-transition-group-DnHjLd7i.js";import"./immer-AZmEbvJU.js";import"./reselect-DyB87yl0.js";import"./redux-thunk-ClJT1hhx.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();const se=()=>o.jsx(z,{}),re=()=>o.jsxs(w,{style:{textAlign:"center",marginTop:"50px"},children:[o.jsx(d,{variant:"h4",gutterBottom:!0,children:"404 - Page Not Found"}),o.jsx(d,{variant:"body1",gutterBottom:!0,children:"Sorry, the page you are looking for does not exist."}),o.jsx(T,{variant:"contained",color:"primary",component:O,to:"/",children:"Go to Homepage"})]}),ae={loading:!1,error:null,posts:[]},I=J({name:"posts",initialState:ae,reducers:{searchPostsRequest(t,e){t.loading=!0;const r=new URL(window.location.href);e.payload.length<3?r.searchParams.delete("q"):r.searchParams.set("q",e.payload),window.history.pushState({},"",r.toString())},fetchPostsRequest(t){t.loading=!0;const e=new URL(window.location.href);e.searchParams.delete("q"),window.history.pushState({},"",e.toString())},fetchPostsSuccess(t,e){t.loading=!1,t.posts=e.payload},fetchPostsFailure(t,e){t.loading=!1,t.error=e.payload},deletePostRequest(t,e){},deletePostSuccess(t,e){t.posts=t.posts.filter(r=>r.id!==e.payload)},deletePostFailure(t,e){t.error=e.payload}}}),{searchPostsRequest:L,fetchPostsRequest:$,fetchPostsSuccess:_,fetchPostsFailure:m,deletePostRequest:B,deletePostSuccess:ne,deletePostFailure:ie}=I.actions,ce=I.reducer,le=l.memo(({id:t,title:e,body:r})=>{const{t:a}=x(),s=R(),n=()=>{s(B(t))};return o.jsx(p,{"data-testid":"post-item",display:"flex",gap:"1rem",sx:{paddingBottom:"1rem",borderBottom:"1px solid",marginBottom:"1rem"},children:o.jsxs(p,{display:"flex",children:[o.jsxs(p,{flexGrow:1,children:[o.jsx(d,{variant:"h6",gutterBottom:!0,children:e}),o.jsx(d,{variant:"body1",gutterBottom:!0,children:r})]}),o.jsx(p,{flexShrink:0,children:o.jsx(T,{"data-testid":"post-item-delete",variant:"contained",startIcon:o.jsx(K,{}),onClick:n,children:a("delete")})})]})})}),de="_loading_10ymu_1",me="_error_10ymu_2",pe="_empty_10ymu_3",g={loading:de,error:me,empty:pe},y=({dataTestId:t,i18nKey:e})=>{const{t:r}=x();return o.jsx(d,{variant:"h2","data-testid":t,children:r(e)})},ue=()=>{const t=u(a=>a.posts.loading),e=u(a=>a.posts.error),r=u(a=>a.posts.posts);return o.jsx(w,{className:Z({[g.loading]:t,[g.error]:e,[g.empty]:!r||!r.length}),children:t?o.jsx(y,{dataTestId:"post-list-loading",i18nKey:"loading"}):e?o.jsx(y,{dataTestId:"post-list-error",i18nKey:"error"}):r&&r.length?r.map(a=>o.jsx(le,{id:a.id,title:a.title,body:a.body},a.id)):o.jsx(y,{dataTestId:"post-list-empty",i18nKey:"empty"})})};function he(t,e){const[r,a]=l.useState(t);return l.useEffect(()=>{const s=setTimeout(()=>{a(t)},e);return()=>{clearTimeout(s)}},[t,e]),r}const fe=()=>{const{t}=x(),e=R(),a=new URLSearchParams(window.location.search).get("q")||"",[s,n]=l.useState(a),c=he(s,500);l.useEffect(()=>{e&&(c.length==0?e($()):c.length>=3&&e(L(c)))},[e,c]);const E=F=>{n(F.target.value)};return o.jsx(H,{"data-testid":"SearchInput",label:t("searchPlaceholder"),variant:"outlined",fullWidth:!0,value:s,onChange:E,InputProps:{startAdornment:o.jsx(U,{position:"start",children:o.jsx(V,{})})}})},ge=()=>o.jsxs(o.Fragment,{children:[o.jsx(b,{container:!0,justifyContent:"center",alignItems:"center",children:o.jsx(b,{item:!0,xs:12,md:4,sx:{marginTop:"1rem",marginBottom:"1rem"},children:o.jsx(fe,{})})}),o.jsx(ue,{})]}),ye=()=>o.jsx(G,{children:o.jsxs(h,{element:o.jsx(se,{}),children:[o.jsx(h,{path:"/",element:o.jsx(ge,{})}),o.jsx(h,{path:"*",element:o.jsx(re,{})})]})}),xe="Search blog posts",Pe="Loading...",je="An error occurred",Se="No blog posts found",be={searchPlaceholder:xe,loading:Pe,error:je,empty:Se,delete:"Delete"},Re="Cerca post del blog",we="Caricamento...",Te="Si è verificato un errore",ve="Nessun post del blog trovato",Ie={searchPlaceholder:Re,loading:we,error:Te,empty:ve,delete:"Elimina"},Le="Buscar publicaciones de blog",$e="Cargando...",_e="Ocurrió un error",Be="No se encontraron publicaciones de blog",qe={searchPlaceholder:Le,loading:$e,error:_e,empty:Be,delete:"Eliminar"},Ee={en:{translation:be},it:{translation:Ie},es:{translation:qe}};v.use(X).init({resources:Ee,lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}});const Fe=oe({posts:ce});function*Ne(t){try{const e=yield P(j.get,`https://jsonplaceholder.typicode.com/posts?q=${t.payload}`);yield i(_(e.data))}catch(e){e instanceof S?yield i(m(e.message)):yield i(m(e.message))}}function*Ae(){try{const t=yield P(j.get,"https://jsonplaceholder.typicode.com/posts");yield i(_(t.data))}catch(t){t instanceof S?yield i(m(t.message)):yield i(m(t.message))}}function*Ce(t){try{yield P(j.delete,`https://jsonplaceholder.typicode.com/posts/${t.payload}`),yield i(ne(t.payload))}catch(e){e instanceof S?yield i(ie(e.message)):yield i(m(e.message))}}function*Oe(){yield f(L.type,Ne),yield f($.type,Ae),yield f(B.type,Ce)}function*De(){yield ee([Oe()])}const q=te(),Me=Q({reducer:Fe,middleware:t=>t().concat(q)});q.run(De);const ze=W({palette:{primary:{main:"#1976d2"},secondary:{main:"#dc004e"},background:{default:"#f4f6f8"},text:{primary:"#333",secondary:"#555"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',h1:{fontSize:"2.5rem",fontWeight:500},h2:{fontSize:"2rem",fontWeight:500},body1:{fontSize:"1rem"},body2:{fontSize:"0.875rem"}},spacing:8,shape:{borderRadius:8}}),Ge=D([{path:"/*",element:o.jsx(ye,{})}]);A.createRoot(document.getElementById("root")).render(o.jsx(N.StrictMode,{children:o.jsx(C,{store:Me,children:o.jsx(k,{theme:ze,children:o.jsx(Y,{i18n:v,children:o.jsx(M,{router:Ge})})})})}));
